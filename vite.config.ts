import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";

/**
 * Vite 설정 파일
 *
 * defineConfig 함수를 사용하면 타입 힌트와 자동완성을 받을 수 있어요.
 *
 * 📖 공식 문서: https://vitejs.dev/config/
 */
export default defineConfig({
    /**
     * ============================================
     * plugins (플러그인)
     * ============================================
     *
     * Vite의 기능을 확장하는 플러그인들을 등록합니다.
     * react() 플러그인은 React의 JSX 변환, Fast Refresh 등을 지원해요.
     */
    plugins: [react()],

    /**
     * ============================================
     * server (개발 서버 설정)
     * ============================================
     *
     * npm run dev로 실행되는 개발 서버의 동작을 설정합니다.
     */
    server: {
        /**
         * port: 개발 서버 포트 번호
         *
         * 기본값은 5173이에요.
         * 다른 프로젝트와 포트가 겹칠 때 변경하면 됩니다.
         */
        port: 5173,

        /**
         * open: 서버 시작 시 브라우저 자동 열기
         *
         * true로 설정하면 npm run dev 할 때 브라우저가 자동으로 열려요.
         * 기본값은 false입니다.
         */
        open: true,

        /**
         * host: 호스트 설정
         *
         * true로 설정하면 같은 네트워크의 다른 기기(스마트폰 등)에서
         * 개발 서버에 접속할 수 있어요. 모바일 테스트할 때 유용합니다.
         * 기본값은 false입니다.
         */
        host: true,
    },

    /**
     * ============================================
     * build (빌드 설정)
     * ============================================
     *
     * npm run build로 실행되는 프로덕션 빌드의 동작을 설정합니다.
     */
    build: {
        /**
         * outDir: 빌드 결과물 출력 디렉토리
         *
         * 기본값은 'dist'예요.
         * 빌드하면 이 폴더에 최적화된 파일들이 생성됩니다.
         */
        outDir: "dist",

        /**
         * sourcemap: 소스맵 생성 여부
         *
         * true로 설정하면 배포 후에도 원본 코드 위치를 추적할 수 있어요.
         * 디버깅에 유용하지만, 파일 크기가 커지고 코드가 노출될 수 있어요.
         *
         * 옵션:
         * - true: 별도의 .map 파일 생성
         * - 'inline': JS 파일 안에 소스맵 포함
         * - 'hidden': .map 파일 생성하지만 JS에서 참조 안 함
         * - false: 소스맵 생성 안 함 (기본값)
         */
        sourcemap: false,

        /**
         * minify: 코드 압축 방식
         *
         * 기본값은 'esbuild'로, 매우 빠른 압축을 제공해요.
         * 'terser'를 사용하면 더 강력한 압축이 가능하지만 느려요.
         */
        minify: "esbuild",
    },

    /**
     * ============================================
     * resolve (모듈 해석 설정)
     * ============================================
     *
     * import 경로를 어떻게 해석할지 설정합니다.
     */
    resolve: {
        /**
         * alias: 경로 별칭 설정
         *
         * 긴 상대 경로 대신 짧은 별칭을 사용할 수 있어요.
         *
         * 변경 전: import Button from '../../../components/Button'
         * 변경 후: import Button from '@/components/Button'
         */
        alias: {
            "@": "/src",
        },
    },

    /**
     * ============================================
     * preview (프리뷰 서버 설정)
     * ============================================
     *
     * npm run preview로 실행되는 프리뷰 서버의 동작을 설정합니다.
     * 빌드된 결과물을 로컬에서 미리 확인할 때 사용해요.
     */
    preview: {
        /**
         * port: 프리뷰 서버 포트 번호
         */
        port: 4173,

        /**
         * open: 프리뷰 서버 시작 시 브라우저 자동 열기
         */
        open: true,
    },
});
